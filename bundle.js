(()=>{"use strict";var e={307:(e,t,n)=>{n.r(t)},250:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentFigure=t.renderCell=t.renderCells=t.board=void 0;const r=n(944);function a(e){let t=document.createElement("div");return t.classList.add("cells__wrapper"),e.forEach(((e,n)=>{let r=document.createElement("div");r.classList.add("cells__row"),e.forEach(((e,t)=>{r.appendChild(l(t,n,e))})),t.appendChild(r)})),t}function l(e,t,n){let a=document.createElement("div");return a.setAttribute("data-x",String(e)),a.setAttribute("data-y",String(t)),a.classList.add("cell"),n===r.Figures.FIGUREX&&a.classList.add("cell__X"),n===r.Figures.FIGURE0&&a.classList.add("cell__0"),n&&a.classList.add("disable"),a.textContent=n,a}t.board=e=>a(e),t.renderCells=a,t.renderCell=l,t.getCurrentFigure=function(e){return e%2?r.Figures.FIGURE0:r.Figures.FIGUREX}},211:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getInformationTemplate=void 0,t.getInformationTemplate=(e,t,n)=>{let r=document.createElement("div");r.classList.add("information");let a=document.createElement("h5");a.classList.add("title"),a.textContent="Информация";let l=document.createElement("p"),d=document.createElement("p"),i=document.createElement("p");return l.classList.add("step"),d.classList.add("currentFigure"),i.classList.add("winSeries"),l.textContent="Счетчик ходов: "+e,d.textContent="Текущий ход: "+n,i.textContent="Победная серия: "+t,r.appendChild(a),r.appendChild(l),r.appendChild(d),r.appendChild(i),r}},402:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getModalTemplate=void 0,t.getModalTemplate=(e,t)=>{let n=document.createElement("div");n.classList.add("overlay");let r=document.createElement("div");r.classList.add("content"),n.appendChild(r),r.textContent="Победа "+e;let a=document.createElement("button");return a.classList.add("button"),a.textContent="Начать новую игру",r.appendChild(a),a.addEventListener("click",t),n}},122:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateInput=t.renderSettingsNewGame=void 0,t.renderSettingsNewGame=(e,n,r)=>{let a=document.createElement("div"),l=document.createElement("h5");l.classList.add("title"),l.textContent="Начать новую игру";let d=document.createElement("label");d.textContent="Размер сетки";let i=(0,t.generateInput)(e,u);d.appendChild(i);let s=document.createElement("label");s.textContent="Победная серия";let o=(0,t.generateInput)(n,u);s.appendChild(o);let c=document.createElement("button");function u(){i.value=+i.value<=3?"3":+i.value>55?"55":i.value,o.value=String(+o.value<=3?"3":Math.min(Math.round(1*+i.value),+o.value))}return c.classList.add("newGame"),c.textContent="Начать",a.appendChild(l),a.appendChild(d),a.appendChild(s),a.appendChild(c),c.addEventListener("click",(()=>r(+i.value,+o.value))),a},t.generateInput=(e,t,n=3,r=55)=>{let a=document.createElement("input");return a.type="number",a.min=String(n),a.max=String(r),a.onchange=t,a.value=String(e),a}},919:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderSidebar=void 0;const r=n(122),a=n(211),l=n(250);t.renderSidebar=(e,t)=>{let n=document.createElement("div");n.classList.add("sidebar");let d=document.createElement("div");d.classList.add("settingsWrapper"),d.appendChild((0,r.renderSettingsNewGame)(e.newSize,e.newWinSeries,t));let i=document.createElement("div");return i.classList.add("informationWrapper"),i.innerHTML="",i.appendChild((0,a.getInformationTemplate)(e.step,e.winSeriesInGame,(0,l.getCurrentFigure)(e.step))),n.appendChild(d),n.appendChild(i),n}},944:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Figures=void 0,(n=t.Figures||(t.Figures={})).FIGUREX="X",n.FIGURE0="0"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(307);const e=n(250),t=n(402),r=n(919);function a(e){return[...Array(e)].map((()=>Array(e).fill("")))}!function(){let n={size:3,winSeriesInGame:3,step:0,cells:a(3),newSize:3,newWinSeries:3},l=document.createElement("div");l.classList.add("wrapper");let d=document.createElement("div");d.classList.add("main");let i=document.createElement("div");i.classList.add("board"),i.addEventListener("click",(function(r,a=(0,e.getCurrentFigure)(n.step)){let l=r.target;if(l.classList.contains("cell")&&!l.classList.contains("disable")){let e=Number(l.getAttribute("data-x")),r=Number(l.getAttribute("data-y")),o={x:e,y:r};if(n.cells[Number(r)][Number(e)]=a,n.step++,p(),u(),d="board",s=JSON.stringify(n),localStorage.setItem(d,s),function(e,t,n,r){let a={vertical:{x:"n",y:"i",arr:[]},horizontal:{x:"i",y:"n",arr:[]},mainDiagonal:{x:"i",y:"i",arr:[]},secondaryDiagonal:{x:"i",y:"d",arr:[]}};return Object.keys(a).map((r=>{a[r].arr=function(e,t,n,r){let a=[];for(let l=1-t;l<t;l++){let t="n"===r.x?n.x:"d"===r.x?n.x-l:n.x+l,d="n"===r.y?n.y:"d"===r.y?n.y-l:n.y+l;t>=0&&d>=0&&t<e.length&&d<e.length&&a.push(e[d][t])}return a}(e,n,t,a[r])})),Object.keys(a).some((e=>function(e,t,n){let r=0;for(let a=0;a<=e.length-1;a++){let l=e[a]===n?r+1:0;if(r=l,l===t)return!0}return!1}(a[e].arr,n,r)))}(n.cells,o,n.winSeriesInGame,a)){let e=(0,t.getModalTemplate)(a,c);i.appendChild(e),localStorage.removeItem("board")}}var d,s})),i.appendChild((0,e.board)(n.cells)),d.appendChild(i);let s=document.createElement("div"),o=(0,r.renderSidebar)(n,c);if(s.appendChild(o),l.appendChild(s),l.appendChild(d),document.body.appendChild(l),localStorage.getItem("board")){let e=localStorage.getItem("board");e&&(n=JSON.parse(e),p(),u())}function c(e=n.size,t=n.winSeriesInGame){let r=Number.isInteger(e)?e:n.size,l={size:r,winSeriesInGame:t,cells:a(r),step:0,newSize:r,newWinSeries:t};n=l,p(),u()}function u(){s.innerHTML="",s.appendChild((0,r.renderSidebar)(n,c))}function p(){i.innerHTML="",i.appendChild((0,e.board)(n.cells))}}()})()})();