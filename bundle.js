(()=>{"use strict";var e={307:(e,t,n)=>{n.r(t)},250:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getIndexCurrentUser=t.renderCell=t.renderCells=t.renderBoard=void 0;const r=n(944);function a(e){let t=document.createElement("div");return t.classList.add("cells__wrapper"),e.forEach(((e,n)=>{let r=document.createElement("div");r.classList.add("cells__row"),e.forEach(((e,t)=>{r.appendChild(i(t,n,e))})),t.appendChild(r)})),t}function i(e,t,n){let a=document.createElement("div");return a.setAttribute("data-x",String(e)),a.setAttribute("data-y",String(t)),a.classList.add("cell"),n===r.Figures.FIGUREX&&a.classList.add("cell__X"),n===r.Figures.FIGURE0&&a.classList.add("cell__0"),n&&a.classList.add("disable"),a.textContent=n,a}t.renderBoard=e=>a(e),t.renderCells=a,t.renderCell=i,t.getIndexCurrentUser=function(e){return e%2}},211:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderInformation=void 0;const r=n(250);t.renderInformation=e=>{let t=document.createElement("div");t.classList.add("information");let n=document.createElement("h5");n.classList.add("title"),n.textContent="Информация";let a=document.createElement("p");a.classList.add("step"),a.textContent="Счетчик ходов: "+e.step;let i=document.createElement("p");i.classList.add("currentFigure"),i.innerHTML=`Текущий ход: <span class="activeFigure">${e.users[(0,r.getIndexCurrentUser)(e.step)].figure}</span>`;let d=document.createElement("p");d.classList.add("step"),d.textContent="Победная серия: "+e.winSeriesInGame;let l=document.createElement("p");return l.classList.add("countWin"),l.textContent=`${e.users[0].name} ${e.users[0].figure} [${e.users[0].win} : ${e.users[1].win}] ${e.users[1].name}  ${e.users[1].figure}`,t.appendChild(n),t.appendChild(a),t.appendChild(i),t.appendChild(d),t.appendChild(l),t}},402:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderModal=void 0,t.renderModal=(e,t)=>{let n=document.createElement("div");n.classList.add("overlay");let r=document.createElement("div");r.classList.add("content"),n.appendChild(r),r.innerHTML=e;let a=document.createElement("button");return a.classList.add("button"),a.textContent="Начать новую игру",r.appendChild(a),a.addEventListener("click",t),n}},122:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateInput=t.renderSettingsNewGame=void 0;const r=n(346);t.renderSettingsNewGame=(e,n,a)=>{let i=document.createElement("div"),d=document.createElement("h5");d.classList.add("title"),d.textContent="Начать новую игру";let l=document.createElement("label");l.textContent="Размер сетки";let s=(0,t.generateInput)(e,p);l.appendChild(s);let c=document.createElement("label");c.textContent="Победная серия";let o=(0,t.generateInput)(n,p);c.appendChild(o);let u=document.createElement("button");function p(){s.value=+s.value<=+r.MIN_VALUE?r.MIN_VALUE:+s.value>+r.MAX_VALUE?r.MAX_VALUE:s.value,o.value=String(+o.value<=+r.MIN_VALUE?r.MIN_VALUE:Math.min(Math.round(1*+s.value),+o.value))}return u.classList.add("newGame"),u.textContent="Начать",i.appendChild(d),i.appendChild(l),i.appendChild(c),i.appendChild(u),u.addEventListener("click",(()=>a(+s.value,+o.value))),i},t.generateInput=(e,t,n=r.MIN_VALUE,a=r.MAX_VALUE)=>{let i=document.createElement("input");return i.classList.add("input"),i.type="number",i.step=r.STEP,i.min=String(n),i.max=String(a),i.onchange=t,i.onkeypress=()=>!1,i.onwheel=()=>!0,i.title="Изменить значение можно прокруткой колеса мыши",i.value=String(e),i}},346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STEP=t.MAX_VALUE=t.MIN_VALUE=void 0,t.MIN_VALUE="3",t.MAX_VALUE="55",t.STEP="2"},944:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Figures=void 0,(n=t.Figures||(t.Figures={})).FIGUREX="X",n.FIGURE0="0"}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(307);const e=n(250),t=n(944),r=n(402),a=n(211),i=n(122);function d(e){return[...Array(e)].map((()=>Array(e).fill("")))}!function(){let n={size:3,winSeriesInGame:3,step:0,cells:d(3),newSize:3,newWinSeries:3,users:[{name:"Player",win:0,figure:t.Figures.FIGUREX},{name:"Player",win:0,figure:t.Figures.FIGURE0}]},l=document.createElement("div");l.classList.add("wrapper");let s=document.createElement("div"),c=document.createElement("div");c.classList.add("sidebar");const o=document.createElement("div");o.classList.add("informationWrapper"),o.innerHTML="",o.appendChild((0,a.renderInformation)(n));let u=document.createElement("div");u.classList.add("settingsWrapper"),u.appendChild((0,i.renderSettingsNewGame)(n.newSize,n.newWinSeries,g)),s.appendChild(c),c.appendChild(o),c.appendChild(u),s.appendChild(o),s.appendChild(u);let p=document.createElement("div");p.classList.add("main");let m=document.createElement("div");if(m.classList.add("board"),m.addEventListener("click",(function(t){let a=n.users[(0,e.getIndexCurrentUser)(n.step)].figure,i=t.target;if(i.classList.contains("cell")&&!i.classList.contains("disable")){let e=Number(i.getAttribute("data-x")),t=Number(i.getAttribute("data-y")),l={x:e,y:t};n.cells[Number(t)][Number(e)]=a,n.step++,i.textContent=a,i.classList.add("X"===a?"cell__X":"cell__0"),i.classList.add("disable"),f(),localStorage.setItem("board",JSON.stringify(n));let s=function(e,t,n,r,a){let i={vertical:{x:"n",y:"i",arr:[]},horizontal:{x:"i",y:"n",arr:[]},mainDiagonal:{x:"i",y:"i",arr:[]},secondaryDiagonal:{x:"i",y:"d",arr:[]}};return Object.keys(i).map((r=>{i[r].arr=function(e,t,n,r){let a=[],i=p("x",n.x,r,-1),d=p("y",n.y,r,-1),l=p("x",n.x,r,1),s=p("y",n.y,r,1),c=e[d]?e[d][i]:void 0,o=e[s]?e[s][l]:void 0,u=e[n.y][n.x];if(c===u||u===o)for(let i=1-t;i<t;i++){let t=p("x",n.x,r,i),d=p("y",n.y,r,i);t>=0&&d>=0&&t<e.length&&d<e.length&&a.push(e[d][t])}function p(e,t,n,r){return"d"===n[e]?t-r:"i"===n[e]?t+r:t}return a}(e,n,t,i[r])})),Object.keys(i).some((e=>function(e,t,n){let r=0;for(let a=0;a<=e.length-1;a++){let i=e[a]===n?r+1:0;if(r=i,i===t)return!0}return!1}(i[e].arr,n,a)))?`<p>Победа <span class="activeFigure">${a}</span></p>`:r===e.length*e.length-1?"<p>Ничья</p>":""}(n.cells,l,n.winSeriesInGame,n.step-1,a);if(s){let e=(0,r.renderModal)(s,g);s.includes("Победа")&&n.users.map((e=>{e.figure===a&&e.win++})),m.appendChild(e),localStorage.setItem("board",JSON.stringify(Object.assign(Object.assign({},n),{cells:d(n.size),step:0})))}}})),m.appendChild((0,e.renderBoard)(n.cells)),p.appendChild(m),l.appendChild(s),l.appendChild(p),document.body.appendChild(l),localStorage.getItem("board")){let e=localStorage.getItem("board");e&&(n=JSON.parse(e),u.innerHTML="",u.appendChild((0,i.renderSettingsNewGame)(n.newSize,n.newWinSeries,g)),f(),v())}function g(e=n.size,t=n.winSeriesInGame){let r=Number.isInteger(e)?e:n.size;n.size=r,n.winSeriesInGame=t,n.cells=d(r),n.step=0,n.newWinSeries=t,n.newSize=r,v(),f(),Number.isInteger(e)&&(n.users.forEach((e=>{e.win=0})),f()),localStorage.setItem("board",JSON.stringify(n))}function f(){o.innerHTML="",o.appendChild((0,a.renderInformation)(n))}function v(){m.innerHTML="",m.appendChild((0,e.renderBoard)(n.cells))}}()})()})();