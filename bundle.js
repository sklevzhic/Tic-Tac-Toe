(()=>{"use strict";var e={607:function(e,t,r){var l=this&&this.__createBinding||(Object.create?function(e,t,r,l){void 0===l&&(l=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,l,n)}:function(e,t,r,l){void 0===l&&(l=r),e[l]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.checkValuesInSecondaryDiagonal=t.checkValuesInMainDiagonal=t.checkValuesInHorizontal=t.checkValuesInVertical=t.handlerStep=t.renderBoard=t.rerenderTemplate=void 0;const s=i(r(378)),a=r(378),c=r(740);let u=document.querySelector("#step"),o=document.querySelector("#figureCurrent"),d=document.querySelector("#board"),f=document.querySelector("#size"),h=document.querySelector("#winSeries"),v=document.querySelector("#start"),p=new s.default(3,3);if(localStorage.getItem("board")){let e=localStorage.getItem("board"),t=JSON.parse(e||"");p=Object.assign({},t)}function S(e){d.innerHTML="",u.innerText=String(e.step),o.innerText=(0,a.getCurrentValue)(e.step+1),f.value=String(e.size),h.value=String(e.winSeries);let t=g(e);d.appendChild(t)}function g(e){let t=document.createElement("div");return t.classList.add("wrapper"),t.classList.add("flex"),t.classList.add("flex-col"),e.cells.forEach((e=>{let r=document.createElement("div");r.classList.add("flex"),e.forEach((e=>{let t=document.createElement("div");t.classList.add("border"),t.classList.add("w-8"),t.classList.add("h-8"),t.classList.add("text-xl"),t.classList.add("shrink-0"),t.classList.add("text-center"),t.classList.add("cursor-default"),t.classList.add("pt-0.5"),e.value===c.Values.VALUE_X&&(t.classList.add("text-blue-700"),t.innerText=e.value,t.classList.add("cursor-default")),e.value===c.Values.VALUE_0&&(t.classList.add("text-red-700"),t.innerText=e.value,t.classList.add("cursor-default")),e.value||(t.addEventListener("click",(()=>L(e))),t.classList.add("text-gray-700"),t.classList.add("cursor-pointer"),t.classList.add("hover:bg-gray-200"),t.classList.add("hover:text-opacity-50")),r.appendChild(t)})),t.appendChild(r)})),t}function L(e){++p.step,p.cells[e.x][e.y].value=(0,a.getCurrentValue)(p.step),S(p),localStorage.setItem("board",JSON.stringify(p)),function(e,t){(y(e,t)||x(e,t)||w(e,t)||b(e,t))&&function(e){let t=`\n    <div  class="absolute top-1/2 left-1/2 p-4 w-full h-full bg-opacity-20 transform -translate-x-1/2 -translate-y-1/2 bg-red-200">\n    <div class="text-center items-center">Победа <span>${e}</span></div>\n  </div> `;d.innerHTML+=t,localStorage.removeItem("board")}(t)}(e,(0,a.getCurrentValue)(p.step))}function y(e,t){let r=[],l=e.x-p.winSeries>=0?e.x-p.winSeries:0,n=e.x+p.winSeries>=p.cells.length?p.cells.length:e.x+p.winSeries;for(let t=l;t<n;t++)r.push(p.cells[t][e.y].value);return(0,s.checkWinSeriesInLine)(r,p.winSeries,t)}function x(e,t){let r=[],l=e.y-p.winSeries>0?e.y-p.winSeries:0,n=e.y+p.winSeries>=p.cells.length?p.cells.length:e.y+p.winSeries;for(let t=l;t<n;t++)r.push(p.cells[e.x][t].value);return(0,s.checkWinSeriesInLine)(r,p.winSeries,t)}function w(e,t){let r=[];for(let t=-p.winSeries;t<=p.winSeries;t++){let l=e.x+t,n=e.y+t;l>=0&&n>=0&&l<p.cells.length&&n<p.cells.length&&r.push(p.cells[l][n].value)}return(0,s.checkWinSeriesInLine)(r,p.winSeries,t)}function b(e,t){let r=[];for(let t=-p.winSeries;t<=p.winSeries;t++){let l=e.x-t,n=e.y+t;l>=0&&n>=0&&l<p.cells.length&&n<p.cells.length&&r.push(p.cells[l][n].value)}return(0,s.checkWinSeriesInLine)(r,p.winSeries,t)}S(p),t.rerenderTemplate=S,t.renderBoard=g,t.handlerStep=L,t.checkValuesInVertical=y,t.checkValuesInHorizontal=x,t.checkValuesInMainDiagonal=w,t.checkValuesInSecondaryDiagonal=b,f.addEventListener("blur",(function(){f.value=String(+f.value<3?3:+f.value>55?55:+f.value)})),h.addEventListener("blur",(function(){let e=+h.value<3?3:+h.value>p.size?p.size:+h.value;h.value=String(e)})),v.addEventListener("click",(function(){p=new s.default(+f.value,+h.value),p.size=+f.value,p.winSeries=+h.value,S(p)}))},378:function(e,t,r){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkWinSeriesInLine=t.getCurrentValue=t.initialBoard=void 0;const n=l(r(410)),i=r(740);function s(e){let t=[];for(let r=0;r<e;r++){let l=[];for(let t=0;t<e;t++)l.push(new n.default(null,r,t));t.push(l)}return t}t.default=class{constructor(e,t,r=0){this.size=e,this.step=r,this.cells=s(e),this.winSeries=t}},t.initialBoard=s,t.getCurrentValue=function(e){return e%2?i.Values.VALUE_X:i.Values.VALUE_0},t.checkWinSeriesInLine=function(e,t,r){let l=0;for(let n=0;n<=e.length-1;n++){let i=e[n]===r?l+1:0;if(l=i,i===t)return!0}return!1}},410:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,r){this.x=t,this.y=r,this.value=null,this.id=Math.floor(1e4*Math.random())+1}}},740:(e,t)=>{var r,l;Object.defineProperty(t,"__esModule",{value:!0}),t.Operators=t.Values=void 0,(l=t.Values||(t.Values={})).VALUE_X="X",l.VALUE_0="0",(r=t.Operators||(t.Operators={})).INC="+",r.DEC="-"}},t={};!function r(l){var n=t[l];if(void 0!==n)return n.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,r),i.exports}(607)})();